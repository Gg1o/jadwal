<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>X SIJA â€” Ramadhan 1446 H</title>
<link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
/* ============================================================
   RESET & ROOT
============================================================ */
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box;}
:root{
  --teal:#0d6e6e; --teal-l:#15a8a8; --teal-d:#084f4f;
  --gold:#c9952a; --gold-l:#f0c060; --gold-d:#9a6e18;
  --bg:#060d1c; --bg2:#0a1628;
  --card:rgba(255,255,255,0.055);
  --border:rgba(201,149,42,0.22);
  --border-h:rgba(201,149,42,0.5);
  --text:#e8dfc8; --muted:#8a8070;
  --nav:68px; --sidebar:220px;
  --r:14px; --r-lg:20px;
  --sans:'Plus Jakarta Sans',sans-serif;
  --serif:'Amiri',serif;
}
html{scroll-behavior:smooth;}
body{
  font-family:var(--sans);
  background:var(--bg);
  color:var(--text);
  min-height:100vh;
  overflow-x:hidden;
  padding-bottom:var(--nav);
}
button{font-family:var(--sans);}
textarea,input,select{font-family:var(--sans);}

/* ============================================================
   BACKGROUND
============================================================ */
.bg{
  position:fixed;inset:0;z-index:0;pointer-events:none;
  background:
    radial-gradient(ellipse 90% 50% at 50% -10%,rgba(13,110,110,0.28) 0%,transparent 65%),
    radial-gradient(ellipse 50% 40% at 90% 100%,rgba(201,149,42,0.1) 0%,transparent 55%),
    linear-gradient(180deg,#060d1c 0%,#091220 100%);
}
.stars{position:fixed;inset:0;z-index:0;pointer-events:none;overflow:hidden;}
.star{position:absolute;border-radius:50%;background:#fff;animation:twinkle var(--d,3s) ease-in-out infinite;}
@keyframes twinkle{0%,100%{opacity:var(--lo,.1);transform:scale(1);}50%{opacity:var(--hi,.8);transform:scale(1.5);}}

/* ============================================================
   MOON & LANTERNS
============================================================ */
.moon-wrap{position:fixed;top:18px;right:-18px;z-index:1;animation:float 8s ease-in-out infinite;pointer-events:none;}
@keyframes float{0%,100%{transform:translateY(0) rotate(-10deg);}50%{transform:translateY(-10px) rotate(-10deg);}}
.moon{width:90px;height:90px;border-radius:50%;box-shadow:inset -18px -4px 0 0 var(--gold-l);filter:drop-shadow(0 0 18px rgba(240,192,96,.45));}
.lanterns{position:fixed;top:0;left:0;width:100%;z-index:1;pointer-events:none;}
.lant{position:absolute;top:0;animation:sway 6s ease-in-out infinite;transform-origin:top center;}
.lant:nth-child(1){left:6%;animation-delay:0s;}
.lant:nth-child(2){left:26%;animation-delay:1.4s;}
.lant:nth-child(3){left:57%;animation-delay:.7s;}
.lant:nth-child(4){right:6%;animation-delay:1.9s;}
@keyframes sway{0%,100%{transform:rotate(-7deg);}50%{transform:rotate(7deg);}}

/* Mosque */
.mosque{position:fixed;bottom:calc(var(--nav) + 2px);left:0;width:100%;z-index:1;pointer-events:none;opacity:.1;}

/* ============================================================
   LAYOUT: MOBILE-FIRST â†’ PC SIDEBAR
============================================================ */
.shell{position:relative;z-index:10;min-height:100vh;}

/* ------ BOTTOM NAV (mobile) ------ */
.nav{
  position:fixed;bottom:0;left:0;right:0;
  height:var(--nav);
  background:rgba(6,13,28,.97);
  backdrop-filter:blur(18px);
  border-top:1px solid var(--border);
  display:flex;align-items:stretch;
  z-index:1000;
}
.nav-item{
  flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:3px;cursor:pointer;color:var(--muted);
  transition:color .2s,background .2s;
  padding:4px 2px 8px;
  -webkit-tap-highlight-color:transparent;
  border-top:2px solid transparent;
}
.nav-item svg{width:22px;height:22px;transition:transform .2s;}
.nav-item span{font-size:9px;font-weight:700;letter-spacing:.3px;white-space:nowrap;}
.nav-item.active{color:var(--gold-l);border-top-color:var(--gold);}
.nav-item:hover{color:var(--gold-l);}
.nav-item.active svg{transform:scale(1.1);}

/* ------ SIDEBAR (PC â‰¥ 900px) ------ */
@media(min-width:900px){
  body{padding-bottom:0;padding-left:var(--sidebar);}
  .mosque{bottom:0;}
  .nav{
    top:0;right:auto;bottom:0;width:var(--sidebar);
    flex-direction:column;align-items:stretch;
    border-top:none;border-right:1px solid var(--border);
    height:100vh;overflow-y:auto;padding:0;
  }
  .nav-brand{
    padding:26px 20px 18px;
    border-bottom:1px solid var(--border);
    margin-bottom:6px;
  }
  .nav-brand-logo{font-weight:800;display:flex;align-items:baseline;gap:2px;}
  .nav-brand-logo .bx{font-size:30px;color:#fff;line-height:1;}
  .nav-brand-logo .bs{font-size:19px;color:var(--gold-l);}
  .nav-brand-badge{
    font-size:9px;font-weight:700;letter-spacing:1px;
    background:linear-gradient(135deg,var(--teal),var(--teal-l));
    color:#fff;padding:2px 8px;border-radius:20px;
    text-transform:uppercase;margin-top:6px;display:inline-block;
  }
  .nav-item{
    flex:none;flex-direction:row;gap:11px;
    padding:13px 18px;justify-content:flex-start;
    border-top:none;border-left:3px solid transparent;
    font-size:13px;border-radius:0;
  }
  .nav-item svg{width:19px;height:19px;}
  .nav-item span{font-size:13px;font-weight:600;letter-spacing:0;}
  .nav-item.active{background:rgba(201,149,42,0.1);border-left-color:var(--gold);color:var(--gold-l);}
  .nav-item:hover{background:rgba(255,255,255,0.04);color:var(--text);}
  .nav-item.active:hover{color:var(--gold-l);}
}

/* ------ HEADER ------ */
.header{
  position:sticky;top:0;z-index:100;
  display:flex;align-items:center;gap:12px;
  padding:12px 16px;
  background:rgba(6,13,28,.88);
  backdrop-filter:blur(16px);
  border-bottom:1px solid var(--border);
}
.header-logo{font-weight:800;display:flex;flex-direction:column;align-items:flex-start;gap:4px;flex:1;}
.header-logo-top{display:flex;align-items:baseline;gap:2px;}
.header-logo .lx{font-size:34px;color:#fff;line-height:1;}
.header-logo .ls{font-size:21px;color:var(--gold-l);}
.header-logo .lb{
  font-size:9px;font-weight:700;letter-spacing:1px;
  background:linear-gradient(135deg,var(--teal),var(--teal-l));
  color:#fff;padding:2px 7px;border-radius:20px;
  align-self:flex-start;text-transform:uppercase;
}
.header-mid{flex:1;display:none;}
.header-ptitle{font-size:18px;font-weight:800;color:#fff;}
.header-psub{font-size:11px;color:var(--muted);}
.header-time{text-align:right;flex-shrink:0;}
.header-clock{font-size:24px;font-weight:800;color:#fff;line-height:1;font-variant-numeric:tabular-nums;}
.header-date{font-size:10px;color:var(--muted);margin-top:2px;}
.header-hijri{font-family:var(--serif);font-size:12px;color:var(--gold-l);direction:rtl;}

@media(min-width:900px){
  .header-logo{display:none;}
  .header-mid{display:flex;flex-direction:column;}
  .header-clock{font-size:28px;}
}

/* ------ PRAYER STRIP ------ */
.prayer-strip{
  display:flex;overflow-x:auto;
  padding:10px 14px;gap:0;
  background:rgba(13,110,110,0.1);
  border-bottom:1px solid var(--border);
  scrollbar-width:none;
}
.prayer-strip::-webkit-scrollbar{display:none;}
.pi{
  flex:1;min-width:0;text-align:center;
  padding:7px 3px;border-radius:8px;
  border-right:1px solid rgba(201,149,42,.12);
  transition:background .25s;
}
.pi:last-child{border-right:none;}
.pi.active{background:rgba(201,149,42,.16);}
.pi-n{font-size:8px;font-weight:700;color:var(--gold-l);text-transform:uppercase;letter-spacing:.1px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.pi-t{font-size:13px;font-weight:700;color:#fff;margin-top:2px;font-variant-numeric:tabular-nums;}

@media(min-width:900px){.pi{min-width:90px;}.pi-t{font-size:15px;}.pi-n{font-size:9px;letter-spacing:.4px;}}

/* ============================================================
   PAGES
============================================================ */
.page{display:none;animation:fadeup .32s ease;}
.page.active{display:block;}
@keyframes fadeup{from{opacity:0;transform:translateY(12px);}to{opacity:1;transform:translateY(0);}}
@keyframes hl{0%,100%{box-shadow:none;}50%{box-shadow:0 0 0 3px rgba(201,149,42,.5);}}

.wrap{max-width:900px;margin:0 auto;padding:0 14px 24px;}
@media(min-width:900px){.wrap{padding:0 32px 32px;}}

.ptitle{font-size:26px;font-weight:800;text-align:center;margin:20px 0 4px;color:#fff;}
.ptitle span{color:var(--gold-l);}
.psub{text-align:center;font-size:12px;color:var(--muted);margin-bottom:18px;}
@media(min-width:900px){.ptitle{font-size:30px;margin:28px 0 5px;}}

/* ============================================================
   COUNTDOWN HERO
============================================================ */
.hero{
  margin:12px 14px;
  background:linear-gradient(135deg,rgba(13,110,110,.4),rgba(6,13,28,.85));
  border:1px solid var(--border);border-radius:var(--r-lg);
  padding:18px 20px;text-align:center;position:relative;overflow:hidden;
  transition:background .6s,border-color .6s;
}
.hero::before{
  content:'';position:absolute;inset:0;border-radius:var(--r-lg);
  background:url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M20 20v-3h-2v3h-3v2h3v3h2v-3h3v-2h-3zM4 4V1H2v3H-1v2h3v3h2V6h3V4H4z' fill='%23c9952a' fill-opacity='.04'/%3E%3C/svg%3E");
}
/* ALERT mode â€” â‰¤5 menit sebelum waktu sholat */
.hero.hero-alert{
  background:linear-gradient(135deg,rgba(13,80,80,.5),rgba(201,120,20,.25),rgba(6,13,28,.9));
  border-color:rgba(240,160,40,.6);
  animation:heroPulse 1s ease-in-out infinite;
}
@keyframes heroPulse{
  0%,100%{box-shadow:0 0 0 0 rgba(240,160,40,.0),inset 0 0 0 0 rgba(240,160,40,.0);}
  50%{box-shadow:0 0 18px 6px rgba(240,160,40,.18),inset 0 0 30px 0 rgba(240,160,40,.06);}
}
.hero.hero-alert .hero-label{color:#fbbf24;letter-spacing:3px;}
.hero.hero-alert .hero-time{color:#fbbf24;text-shadow:0 0 32px rgba(251,191,36,.5);}
.hero.hero-alert .hero-arabic{color:#fde68a;}
/* BUKA mode â€” saat waktu berbuka */
.hero.hero-buka{
  background:linear-gradient(135deg,rgba(120,60,5,.5),rgba(201,149,42,.4),rgba(6,13,28,.8));
  border-color:rgba(240,192,96,.7);
  animation:bukaPulse 1.8s ease-in-out infinite;
}
@keyframes bukaPulse{
  0%,100%{box-shadow:0 0 0 0 rgba(240,192,96,.0),inset 0 0 0 0 rgba(240,192,96,.0);}
  50%{box-shadow:0 0 28px 10px rgba(240,192,96,.2),inset 0 0 40px 0 rgba(240,192,96,.07);}
}
.hero.hero-buka .hero-label{color:#f0c060;font-size:13px;letter-spacing:3px;animation:labelGlow 2s ease-in-out infinite;}
@keyframes labelGlow{0%,100%{opacity:.85;}50%{opacity:1;text-shadow:0 0 12px rgba(240,192,96,.6);}}
.hero.hero-buka .hero-time{color:#f0c060;font-size:52px;text-shadow:0 0 40px rgba(240,192,96,.6),0 0 80px rgba(240,192,96,.2);}
.hero.hero-buka .hero-arabic{font-size:30px;color:#fde68a;text-shadow:0 0 20px rgba(240,192,96,.3);}
.hero.hero-buka .hero-sub{color:#e5c87a;font-size:13px;font-weight:600;}
.hero-sub-next{font-size:10px;color:var(--muted);margin-top:3px;opacity:.8;}
.hero-label{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:2px;color:var(--gold-l);margin-bottom:4px;transition:color .4s;}
.hero-arabic{font-family:var(--serif);font-size:24px;color:#fff;margin-bottom:4px;}
.hero-time{font-size:46px;font-weight:800;color:var(--gold-l);line-height:1;font-variant-numeric:tabular-nums;text-shadow:0 0 28px rgba(240,192,96,.3);transition:color .4s,text-shadow .4s;}
.hero-sub{font-size:12px;color:var(--muted);margin-top:6px;}
@media(min-width:900px){
  .hero{margin:18px 32px;padding:26px 40px;}
  .hero-time{font-size:58px;}
  .hero.hero-buka .hero-time{font-size:64px;}
  .hero-arabic{font-size:28px;}
  .hero.hero-buka .hero-arabic{font-size:32px;}
}

/* ============================================================
   BANNER
============================================================ */
.banner{
  margin:0 14px 12px;
  background:linear-gradient(135deg,rgba(201,149,42,.22),rgba(240,192,96,.08));
  border:1px solid rgba(201,149,42,.35);border-radius:var(--r);
  padding:12px 18px;text-align:center;
}
.banner-ar{font-family:var(--serif);font-size:20px;color:var(--gold-l);direction:rtl;display:block;margin-bottom:2px;}
.banner-tr{font-size:11px;color:var(--muted);}
@media(min-width:900px){.banner{margin:0 32px 14px;}}

/* ============================================================
   CARDS
============================================================ */
.card{
  background:var(--card);
  border:1px solid var(--border);border-radius:var(--r-lg);
  padding:18px;margin-bottom:14px;
  transition:border-color .25s,transform .2s,box-shadow .2s;
  position:relative;overflow:hidden;
}
.card:hover{border-color:var(--border-h);transform:translateY(-2px);box-shadow:0 8px 28px rgba(0,0,0,.25);}
.card::after{content:'â˜ª';position:absolute;right:-14px;top:-14px;font-size:100px;opacity:.028;color:var(--gold);pointer-events:none;}

.status-pill{
  display:block;width:fit-content;margin:0 auto 16px;
  padding:8px 22px;border-radius:50px;font-weight:700;font-size:13px;
}
.pill-school{background:linear-gradient(135deg,var(--teal),var(--teal-l));color:#fff;box-shadow:0 4px 16px rgba(13,110,110,.35);}
.pill-off{background:linear-gradient(135deg,#7a2020,#b03030);color:#fff;box-shadow:0 4px 16px rgba(176,48,48,.3);}

.cdesc{font-size:17px;font-weight:600;color:var(--gold-l);line-height:1.5;margin-bottom:18px;white-space:pre-line;}
.cdesc-alert{
  white-space:normal!important;
  background:linear-gradient(135deg,rgba(13,80,80,.35),rgba(201,149,42,.18),rgba(6,13,28,.6));
  border:1.5px solid rgba(240,160,40,.5);
  border-radius:14px;padding:16px 18px;
  animation:alertpulse 1s ease-in-out infinite;
}
@keyframes alertpulse{
  0%,100%{box-shadow:0 0 0 0 rgba(240,160,40,.0),inset 0 0 0 0 rgba(240,160,40,.0);}
  50%{box-shadow:0 0 16px 4px rgba(240,160,40,.15),inset 0 0 24px 0 rgba(240,160,40,.05);}
}
.alert-top{font-size:12px;font-weight:700;color:#fbbf24;margin-bottom:8px;letter-spacing:1.5px;text-transform:uppercase;}
.alert-count{
  font-size:52px;font-weight:800;color:#fde68a;line-height:1;
  font-variant-numeric:tabular-nums;letter-spacing:2px;
  text-shadow:0 0 28px rgba(251,191,36,.5),0 0 60px rgba(251,191,36,.15);
  margin-bottom:10px;
}
.alert-next{font-size:12px;font-weight:600;color:var(--text);opacity:.85;}
.alert-next strong{color:var(--gold-l);}

.irow{display:flex;justify-content:space-between;align-items:flex-start;padding:10px 0;border-bottom:1px solid rgba(201,149,42,.07);}
.irow:last-child{border-bottom:none;}
.ilabel{font-size:11px;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:.5px;min-width:72px;}
.ival{font-size:13px;font-weight:600;text-align:right;flex:1;color:var(--text);}

/* Home 2-col on PC */
@media(min-width:900px){
  .home-grid{display:grid;grid-template-columns:minmax(0,600px);gap:16px;align-items:start;justify-content:center;}
}

/* ============================================================
   SCHEDULE
============================================================ */
.daynav{display:flex;gap:7px;overflow-x:auto;padding:2px 0 6px;scrollbar-width:none;margin-bottom:16px;justify-content:center;flex-wrap:wrap;}
.daynav::-webkit-scrollbar{display:none;}
.daybtn{
  padding:8px 16px;background:var(--card);border:1px solid var(--border);
  border-radius:10px;font-size:12px;font-weight:700;color:var(--text);
  cursor:pointer;transition:all .22s;white-space:nowrap;flex-shrink:0;
}
.daybtn:hover,.daybtn.active{
  background:linear-gradient(135deg,var(--teal),var(--teal-l));
  color:#fff;border-color:transparent;
  box-shadow:0 4px 14px rgba(13,110,110,.4);transform:translateY(-1px);
}
.sched-grid{display:grid;gap:12px;margin-bottom:24px;}
@media(min-width:700px){.sched-grid{grid-template-columns:1fr 1fr;}}

.day-card{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:16px;transition:all .22s;}
.day-card:hover{border-color:var(--border-h);transform:translateY(-2px);box-shadow:0 6px 24px rgba(201,149,42,.12);}
.day-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid rgba(201,149,42,.13);}
.day-name{font-size:18px;font-weight:800;color:#fff;}
.unif-badge{padding:3px 11px;border-radius:20px;font-size:10px;font-weight:700;background:rgba(201,149,42,.16);color:var(--gold-l);border:1px solid rgba(201,149,42,.28);}
.les{padding:8px 0;border-bottom:1px solid rgba(255,255,255,.04);}
.les:last-child{border-bottom:none;}
.les-t{font-size:9px;color:var(--teal-l);font-weight:700;letter-spacing:.4px;}
.les-n{font-size:13px;font-weight:700;color:var(--text);margin:2px 0;}
.les-g{font-size:11px;color:var(--muted);}

/* ============================================================
   ATTENDANCE
============================================================ */
.absen-list{background:var(--card);border:1px solid var(--border);border-radius:var(--r-lg);padding:6px 16px;}
@media(min-width:700px){.absen-list{columns:2;gap:0;padding:8px 20px;}}
.absen-item{display:flex;align-items:center;padding:11px 0;border-bottom:1px solid rgba(255,255,255,.04);break-inside:avoid;}
.absen-item:last-child{border-bottom:none;}
.absen-no{width:34px;font-size:12px;font-weight:700;color:var(--teal-l);}
.absen-name{font-size:13px;font-weight:600;color:var(--text);}

/* ============================================================
   ORG
============================================================ */
.org-card{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:16px;margin-bottom:10px;transition:all .22s;}
.org-card:hover{border-color:var(--border-h);transform:translateY(-2px);}
.org-card.wk{background:linear-gradient(135deg,rgba(13,110,110,.4),rgba(21,168,168,.2));border-color:rgba(21,168,168,.4);}
.org-card.pi2{background:linear-gradient(135deg,rgba(201,149,42,.22),rgba(240,192,96,.1));border-color:rgba(201,149,42,.4);}
.org-pos{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--gold-l);margin-bottom:3px;}
.org-name{font-size:17px;font-weight:800;color:#fff;margin-bottom:5px;}
.org-desc{font-size:11px;color:var(--muted);line-height:1.6;}
.org-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
@media(max-width:520px){.org-grid{grid-template-columns:1fr;}}
.org-sec{margin-bottom:20px;}
.org-sec-title{font-size:11px;font-weight:700;color:var(--gold-l);text-align:center;padding:6px;border-top:1px solid var(--border);border-bottom:1px solid var(--border);letter-spacing:1px;text-transform:uppercase;margin-bottom:10px;}

/* ============================================================
   RANDOMIZER
============================================================ */
.rand-box{background:var(--card);border:1px solid var(--border);border-radius:var(--r-lg);padding:22px;}
@media(min-width:900px){.rand-box{max-width:560px;margin:0 auto;}}
.ctrl-group{margin-bottom:14px;}
.ctrl-label{display:block;font-size:10px;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px;}
.ctrl-input{
  width:100%;padding:11px 14px;
  background:rgba(255,255,255,.05);border:1px solid var(--border);border-radius:10px;
  color:var(--text);font-size:14px;font-weight:600;outline:none;transition:border-color .22s;
}
.ctrl-input:focus{border-color:var(--teal-l);}
.ctrl-input option{background:var(--bg2);}
.btn-main{
  width:100%;padding:13px;
  background:linear-gradient(135deg,var(--teal),var(--teal-l));
  border:none;border-radius:var(--r);color:#fff;
  font-size:14px;font-weight:700;cursor:pointer;transition:all .22s;
  box-shadow:0 4px 16px rgba(13,110,110,.35);
}
.btn-main:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(13,110,110,.5);}
.btn-main:active{transform:scale(.98);}
.rand-res{margin-top:20px;}
.group-card{background:rgba(255,255,255,.04);border:1px solid rgba(201,149,42,.18);border-radius:10px;padding:13px;margin-bottom:9px;}
.group-title{font-size:13px;font-weight:800;color:var(--gold-l);margin-bottom:5px;}
.group-mems{font-size:12px;color:var(--muted);line-height:1.7;}

/* ============================================================
   AI LAUNCHER
============================================================ */
.ai-context{
  background:rgba(201,149,42,.08);border:1px solid rgba(201,149,42,.3);
  border-radius:var(--r);padding:14px 16px;margin-bottom:16px;
}
.ai-context-label{font-size:10px;font-weight:700;color:var(--gold-l);text-transform:uppercase;letter-spacing:.5px;margin-bottom:4px;}
.ai-context-desc{font-size:12px;color:var(--muted);line-height:1.5;margin-bottom:10px;}
.ai-textarea{
  width:100%;background:rgba(255,255,255,.05);border:1px solid var(--border);
  border-radius:10px;padding:10px 13px;color:var(--text);font-size:13px;
  outline:none;resize:none;min-height:65px;transition:border-color .22s;line-height:1.5;
}
.ai-textarea:focus{border-color:var(--gold-l);}
.ai-textarea::placeholder{color:var(--muted);}

.ai-grid{display:flex;flex-direction:column;gap:11px;margin-bottom:16px;}
@media(min-width:700px){.ai-grid{display:grid;grid-template-columns:repeat(3,1fr);}}

.ai-card{border-radius:var(--r-lg);padding:16px;border:1px solid transparent;transition:all .22s;position:relative;overflow:hidden;}
.ai-card>*{position:relative;z-index:1;}
.ai-card:hover{transform:translateY(-3px);box-shadow:0 8px 28px rgba(0,0,0,.2);}
.ai-card.gpt{background:linear-gradient(135deg,rgba(16,163,127,.16),rgba(16,163,127,.05));border-color:rgba(16,163,127,.32);}
.ai-card.cld{background:linear-gradient(135deg,rgba(201,149,42,.16),rgba(201,149,42,.05));border-color:rgba(201,149,42,.32);}
.ai-card.gem{background:linear-gradient(135deg,rgba(66,133,244,.16),rgba(66,133,244,.05));border-color:rgba(66,133,244,.32);}

.ai-head{display:flex;align-items:center;gap:10px;margin-bottom:9px;}
.ai-logo{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;flex-shrink:0;}
.gpt .ai-logo{background:#10a37f;}
.cld .ai-logo{background:linear-gradient(135deg,var(--gold),#d4890e);}
.gem .ai-logo{background:linear-gradient(135deg,#4285F4,#9B72CB);}
.ai-platname{font-size:15px;font-weight:800;color:#fff;}
.ai-platsub{font-size:10px;color:var(--muted);margin-top:1px;}
.ai-badge{margin-left:auto;padding:3px 8px;border-radius:20px;font-size:9px;font-weight:700;background:rgba(76,175,80,.15);color:#7ec47e;border:1px solid rgba(76,175,80,.3);}
.ai-desc{font-size:12px;color:var(--muted);line-height:1.5;margin-bottom:9px;}
.ai-tags{display:flex;gap:5px;flex-wrap:wrap;margin-bottom:12px;}
.ai-tags span{font-size:10px;font-weight:600;padding:3px 8px;border-radius:20px;background:rgba(255,255,255,.07);color:var(--muted);}
.ai-btn{
  width:100%;padding:11px;border:none;border-radius:10px;
  font-size:12px;font-weight:700;cursor:pointer;
  display:flex;align-items:center;justify-content:center;gap:6px;
  transition:all .22s;color:#fff;
}
.ai-btn.gpt-btn{background:#10a37f;}
.ai-btn.gpt-btn:hover{background:#0d8c6d;box-shadow:0 4px 16px rgba(16,163,127,.4);}
.ai-btn.cld-btn{background:linear-gradient(135deg,var(--gold),#d4890e);}
.ai-btn.cld-btn:hover{box-shadow:0 4px 16px rgba(201,149,42,.4);}
.ai-btn.gem-btn{background:linear-gradient(135deg,#4285F4,#9B72CB);}
.ai-btn.gem-btn:hover{box-shadow:0 4px 16px rgba(66,133,244,.4);}

.ai-tips{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:14px 16px;margin-bottom:20px;}
.ai-tips-title{font-size:10px;font-weight:800;color:var(--gold-l);text-transform:uppercase;letter-spacing:.5px;margin-bottom:9px;}
.ai-tip{font-size:12px;color:var(--muted);padding:5px 0;border-bottom:1px solid rgba(255,255,255,.04);line-height:1.5;}
.ai-tip:last-child{border-bottom:none;}

/* ============================================================
   TODO
============================================================ */
.todo-wrap{max-width:900px;margin:0 auto;padding:0 14px 24px;}
@media(min-width:900px){.todo-wrap{padding:0 32px 32px;}}
.todo-stats{display:flex;gap:9px;margin-bottom:16px;}
.todo-stat{flex:1;background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:12px;text-align:center;}
.todo-stat-n{font-size:24px;font-weight:800;color:var(--gold-l);line-height:1;}
.todo-stat-l{font-size:10px;color:var(--muted);margin-top:3px;font-weight:600;}
.mapel-sel{
  width:100%;background:rgba(255,255,255,.05);border:1px solid var(--border);
  border-radius:10px;padding:9px 13px;color:var(--text);font-size:12px;
  outline:none;cursor:pointer;margin-bottom:9px;
}
.mapel-sel option{background:var(--bg2);}
.todo-input-row{display:flex;gap:7px;margin-bottom:9px;}
.todo-inp{
  flex:1;background:rgba(255,255,255,.05);border:1px solid var(--border);
  border-radius:var(--r);padding:11px 14px;color:var(--text);font-size:13px;
  outline:none;transition:border-color .22s;
}
.todo-inp:focus{border-color:var(--teal-l);}
.todo-inp::placeholder{color:var(--muted);}
.todo-add{
  padding:11px 16px;background:linear-gradient(135deg,var(--teal),var(--teal-l));
  border:none;border-radius:var(--r);color:#fff;font-size:12px;font-weight:700;
  cursor:pointer;transition:all .22s;white-space:nowrap;
}
.todo-add:hover{transform:translateY(-1px);box-shadow:0 5px 16px rgba(13,110,110,.4);}
.todo-filters{display:flex;gap:6px;margin-bottom:13px;}
.todo-filter{
  padding:6px 14px;border-radius:20px;font-size:11px;font-weight:700;
  cursor:pointer;border:1px solid var(--border);background:transparent;color:var(--muted);transition:all .2s;
}
.todo-filter.active,.todo-filter:hover{background:linear-gradient(135deg,var(--teal),var(--teal-l));color:#fff;border-color:transparent;}
.todo-list{display:flex;flex-direction:column;gap:7px;}
.todo-item{
  background:var(--card);border:1px solid var(--border);border-radius:var(--r);
  padding:11px 13px;display:flex;align-items:center;gap:9px;
  transition:all .22s;animation:fadeup .3s ease;
}
.todo-item:hover{border-color:var(--border-h);transform:translateX(3px);}
.todo-item.done{opacity:.5;}
.todo-item.done .todo-text{text-decoration:line-through;color:var(--muted);}
.todo-chk{
  width:21px;height:21px;border-radius:6px;border:2px solid var(--border);
  background:transparent;cursor:pointer;display:flex;align-items:center;justify-content:center;
  transition:all .2s;flex-shrink:0;
}
.todo-item.done .todo-chk{background:linear-gradient(135deg,var(--teal),var(--teal-l));border-color:transparent;}
.todo-text{flex:1;font-size:13px;font-weight:600;color:var(--text);}
.todo-meta{display:flex;flex-direction:column;align-items:flex-end;gap:2px;}
.todo-mapel{font-size:9px;font-weight:700;padding:2px 7px;border-radius:10px;background:rgba(201,149,42,.18);color:var(--gold-l);}
.todo-date{font-size:9px;color:var(--muted);}
.todo-del{background:none;border:none;color:var(--muted);cursor:pointer;padding:2px;font-size:16px;transition:color .2s;}
.todo-del:hover{color:#e74c3c;}
.todo-empty{text-align:center;padding:40px 20px;color:var(--muted);}
.todo-empty .eico{font-size:40px;margin-bottom:8px;display:block;}
.todo-empty p{font-size:13px;font-weight:600;}

/* ============================================================
   SCROLL TOP
============================================================ */
.scroll-top{
  position:fixed;bottom:82px;right:14px;
  width:42px;height:42px;
  background:linear-gradient(135deg,var(--teal),var(--teal-l));
  color:#fff;border:none;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;opacity:0;visibility:hidden;
  transition:all .3s;z-index:999;
  box-shadow:0 4px 14px rgba(13,110,110,.4);
}
.scroll-top.show{opacity:1;visibility:visible;}
.scroll-top:hover{transform:translateY(-3px);}
@media(min-width:900px){.scroll-top{bottom:20px;right:20px;}}

/* PC-only nav items hidden on mobile */
.nav-pc-only { display: none; }
@media(min-width:900px) {
  .nav-pc-only { display: flex; }
  .nav-more-btn { display: none; }
}

/* More sheet */
.more-sheet {
  position: fixed; inset: 0; z-index: 2000;
  display: flex; flex-direction: column; justify-content: flex-end;
  pointer-events: none; opacity: 0;
  transition: opacity .25s;
}
.more-sheet.open { pointer-events: all; opacity: 1; }
.more-backdrop {
  position: absolute; inset: 0;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(4px);
}
.more-sheet-inner {
  position: relative; z-index: 1;
  background: #0e1b2e;
  border-top: 1px solid var(--border);
  border-radius: 22px 22px 0 0;
  padding: 20px 20px calc(var(--nav) + 12px);
  transform: translateY(100%);
  transition: transform .3s cubic-bezier(.32,1,.32,1);
}
.more-sheet.open .more-sheet-inner { transform: translateY(0); }
.more-sheet-title {
  font-size: 13px; font-weight: 700; color: var(--muted);
  text-transform: uppercase; letter-spacing: 1px;
  text-align: center; margin-bottom: 18px;
}
.more-grid {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;
}
.more-item {
  display: flex; flex-direction: column; align-items: center; gap: 8px;
  padding: 16px 8px; cursor: pointer;
  background: var(--card); border: 1px solid var(--border);
  border-radius: var(--r); transition: all .2s;
  -webkit-tap-highlight-color: transparent;
}
.more-item:active { transform: scale(.95); background: rgba(201,149,42,.1); }
.more-icon {
  width: 46px; height: 46px; border-radius: 14px;
  background: linear-gradient(135deg, var(--teal), var(--teal-l));
  display: flex; align-items: center; justify-content: center;
  color: #fff;
}
.more-label { font-size: 12px; font-weight: 700; color: var(--text); }
@media(min-width:900px) {
  .more-sheet { display: none; }
}
#toast{
  position:fixed;bottom:88px;left:50%;transform:translateX(-50%);
  background:rgba(13,110,110,.95);color:#fff;
  padding:10px 20px;border-radius:50px;font-size:12px;font-weight:700;
  z-index:9999;opacity:0;transition:opacity .35s;
  backdrop-filter:blur(10px);border:1px solid rgba(240,192,96,.35);white-space:nowrap;
  pointer-events:none;
}
@media(min-width:900px){#toast{bottom:30px;}}
</style>
</head>
<body>

<!-- BG -->
<div class="bg"></div>
<div class="stars" id="stars"></div>

<!-- Moon -->
<div class="moon-wrap"><div class="moon"></div></div>

<!-- Lanterns -->
<div class="lanterns">
  <svg class="lant" style="width:38px;left:7%;" viewBox="0 0 40 80" fill="none"><line x1="20" y1="0" x2="20" y2="10" stroke="#c9952a" stroke-width="1.5"/><rect x="10" y="10" width="20" height="4" rx="2" fill="#c9952a" opacity=".8"/><rect x="8" y="14" width="24" height="38" rx="4" fill="url(#g1)" opacity=".85"/><rect x="10" y="52" width="20" height="4" rx="2" fill="#c9952a" opacity=".8"/><line x1="20" y1="56" x2="20" y2="68" stroke="#c9952a" stroke-width="1"/><ellipse cx="20" cy="69" rx="4" ry="2" fill="#c9952a" opacity=".5"/><defs><linearGradient id="g1" x1="0" y1="0" x2="1" y2="0"><stop offset="0%" stop-color="#c9952a"/><stop offset="50%" stop-color="#f0c060"/><stop offset="100%" stop-color="#c9952a"/></linearGradient></defs></svg>
  <svg class="lant" style="width:30px;left:27%;" viewBox="0 0 40 80" fill="none"><line x1="20" y1="0" x2="20" y2="10" stroke="#0d6e6e" stroke-width="1.5"/><rect x="10" y="10" width="20" height="4" rx="2" fill="#0d6e6e" opacity=".8"/><rect x="8" y="14" width="24" height="38" rx="4" fill="url(#g2)" opacity=".85"/><rect x="10" y="52" width="20" height="4" rx="2" fill="#0d6e6e" opacity=".8"/><line x1="20" y1="56" x2="20" y2="66" stroke="#0d6e6e" stroke-width="1"/><ellipse cx="20" cy="67" rx="4" ry="2" fill="#0d6e6e" opacity=".5"/><defs><linearGradient id="g2" x1="0" y1="0" x2="1" y2="0"><stop offset="0%" stop-color="#0d6e6e"/><stop offset="50%" stop-color="#15a8a8"/><stop offset="100%" stop-color="#0d6e6e"/></linearGradient></defs></svg>
  <svg class="lant" style="width:34px;left:58%;" viewBox="0 0 40 80" fill="none"><line x1="20" y1="0" x2="20" y2="10" stroke="#c9952a" stroke-width="1.5"/><rect x="10" y="10" width="20" height="4" rx="2" fill="#c9952a" opacity=".8"/><rect x="8" y="14" width="24" height="38" rx="4" fill="url(#g3)" opacity=".85"/><rect x="10" y="52" width="20" height="4" rx="2" fill="#c9952a" opacity=".8"/><line x1="20" y1="56" x2="20" y2="66" stroke="#c9952a" stroke-width="1"/><ellipse cx="20" cy="67" rx="4" ry="2" fill="#c9952a" opacity=".5"/><defs><linearGradient id="g3" x1="0" y1="0" x2="1" y2="0"><stop offset="0%" stop-color="#c9952a"/><stop offset="50%" stop-color="#f0c060"/><stop offset="100%" stop-color="#c9952a"/></linearGradient></defs></svg>
  <svg class="lant" style="width:28px;right:7%;" viewBox="0 0 40 80" fill="none"><line x1="20" y1="0" x2="20" y2="10" stroke="#0d6e6e" stroke-width="1.5"/><rect x="10" y="10" width="20" height="4" rx="2" fill="#0d6e6e" opacity=".8"/><rect x="8" y="14" width="24" height="38" rx="4" fill="url(#g4)" opacity=".85"/><rect x="10" y="52" width="20" height="4" rx="2" fill="#0d6e6e" opacity=".8"/><line x1="20" y1="56" x2="20" y2="64" stroke="#0d6e6e" stroke-width="1"/><ellipse cx="20" cy="65" rx="4" ry="2" fill="#0d6e6e" opacity=".5"/><defs><linearGradient id="g4" x1="0" y1="0" x2="1" y2="0"><stop offset="0%" stop-color="#0d6e6e"/><stop offset="50%" stop-color="#15a8a8"/><stop offset="100%" stop-color="#0d6e6e"/></linearGradient></defs></svg>
</div>

<!-- Mosque -->
<svg class="mosque" viewBox="0 0 800 120" fill="none" preserveAspectRatio="xMidYMax meet">
  <rect x="40" y="20" width="20" height="100" fill="#c9952a"/><polygon points="40,20 50,0 60,20" fill="#c9952a"/><rect x="38" y="55" width="24" height="7" fill="#c9952a" opacity=".7"/>
  <rect x="740" y="20" width="20" height="100" fill="#c9952a"/><polygon points="740,20 750,0 760,20" fill="#c9952a"/><rect x="738" y="55" width="24" height="7" fill="#c9952a" opacity=".7"/>
  <path d="M280 120 L280 60 Q400 -10 520 60 L520 120 Z" fill="#c9952a"/><ellipse cx="400" cy="60" rx="120" ry="50" fill="#c9952a"/>
  <path d="M180 120 L180 80 Q230 40 280 80 L280 120 Z" fill="#c9952a"/><path d="M520 120 L520 80 Q570 40 620 80 L620 120 Z" fill="#c9952a"/>
  <rect x="120" y="90" width="560" height="30" fill="#c9952a"/>
  <path d="M370 120 L370 90 Q400 75 430 90 L430 120 Z" fill="#060d1c" opacity=".5"/>
</svg>

<div class="shell">
<!-- HEADER -->
<div class="header">
  <div class="header-logo">
    <div class="header-logo-top"><span class="lx">X</span><span class="ls">sija</span></div>
    <span class="lb">Ramadhan 1446H</span>
  </div>
  <div class="header-mid">
    <div class="header-ptitle" id="hPageTitle">Beranda</div>
    <div class="header-psub">X SIJA Â· Ramadhan 1446 H</div>
  </div>
  <div class="header-time">
    <div class="header-clock" id="clockEl">00:00</div>
    <div class="header-date" id="dateEl">â€”</div>
    <div class="header-hijri">Ø±Ù…Ø¶Ø§Ù† Ù¡Ù¤Ù¤Ù¦ Ù‡Ù€</div>
  </div>
</div>

<!-- PRAYER STRIP -->
<div class="prayer-strip">
  <div class="pi" data-p="sahur"><div class="pi-n" id="pn-sahur">ğŸŒ™ Sahur</div><div class="pi-t" id="pt-sahur">04:02</div></div>
  <div class="pi" data-p="subuh"><div class="pi-n" id="pn-subuh">Subuh</div><div class="pi-t" id="pt-subuh">04:12</div></div>
  <div class="pi" data-p="dzuhur"><div class="pi-n" id="pn-dzuhur">Dzuhur</div><div class="pi-t" id="pt-dzuhur">11:51</div></div>
  <div class="pi" data-p="ashar"><div class="pi-n" id="pn-ashar">Ashar</div><div class="pi-t" id="pt-ashar">15:08</div></div>
  <div class="pi" data-p="maghrib"><div class="pi-n" id="pn-maghrib">ğŸŒ… Buka</div><div class="pi-t" id="pt-maghrib">17:52</div></div>
  <div class="pi" data-p="isya"><div class="pi-n" id="pn-isya">Isya & Tarawih</div><div class="pi-t" id="pt-isya">19:02</div></div>
</div>

<!-- ======= HOME ======= -->
<div class="page active" id="homePage">
  <div class="hero" id="heroBox">
    <div class="hero-label" id="rcLabel">Menghitung...</div>
    <div class="hero-arabic" id="rcTitle">Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…</div>
    <div class="hero-time" id="rcTime">--:--:--</div>
    <div class="hero-sub" id="rcSub">Semangat puasanya! ğŸŒ™</div>
    <div class="hero-sub-next" id="rcNext"></div>
  </div>
  <div class="banner">
    <span class="banner-ar">Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…</span>
    <span class="banner-tr">Marhaban ya Ramadhan â€” Selamat berpuasa, X SIJA! âœ¨</span>
  </div>
  <div class="wrap">
    <h1 class="ptitle" id="homeTitle">Ada Apa <span>Hari Ini?</span></h1>
    <div class="status-pill pill-school" id="statusPill">Sekolah</div>
    <div class="home-grid">
      <div class="card">
        <div class="cdesc" id="cdesc">Loading...</div>
        <div class="irow"><div class="ilabel" id="lSeragam">Seragam</div><div class="ival" id="iSeragam">-</div></div>
        <div class="irow"><div class="ilabel" id="lMapel">Mapel</div><div class="ival" id="iMapel">-</div></div>
        <div class="irow"><div class="ilabel" id="lPiket">Piket</div><div class="ival" id="iPiket">-</div></div>
        <div class="irow"><div class="ilabel" id="lPulang">Pulang</div><div class="ival" id="iPulang">-</div></div>
      </div>
    </div>
  </div>
</div>

<!-- ======= JADWAL ======= -->
<div class="page" id="calendarPage">
  <div class="wrap">
    <h1 class="ptitle">Jadwal <span>Lengkap</span></h1>
    <div class="psub">Semester Genap 2025/2026 â€” Ramadhan Edition</div>
    <div class="daynav">
      <button class="daybtn" onclick="scrollToDay('Senin',this)">Senin</button>
      <button class="daybtn" onclick="scrollToDay('Selasa',this)">Selasa</button>
      <button class="daybtn" onclick="scrollToDay('Rabu',this)">Rabu</button>
      <button class="daybtn" onclick="scrollToDay('Kamis',this)">Kamis</button>
      <button class="daybtn" onclick="scrollToDay('Jumat',this)">Jumat</button>
    </div>
    <div class="sched-grid" id="schedGrid"></div>
  </div>
</div>

<!-- ======= TUGAS ======= -->
<div class="page" id="todoPage">
  <div class="todo-wrap">
    <h1 class="ptitle">To-Do <span>Tugas</span></h1>
    <div class="psub">Catat semua tugas biar ngga ketinggalan ğŸ“‹</div>
    <div class="todo-stats">
      <div class="todo-stat"><div class="todo-stat-n" id="stTotal">0</div><div class="todo-stat-l">Total</div></div>
      <div class="todo-stat"><div class="todo-stat-n" id="stDone">0</div><div class="todo-stat-l">Selesai</div></div>
      <div class="todo-stat"><div class="todo-stat-n" id="stPend">0</div><div class="todo-stat-l">Belum</div></div>
    </div>
    <select class="mapel-sel" id="todoMapel">
      <option value="">ğŸ“š Pilih Mapel (opsional)</option>
      <option>MTK</option><option>B.IND</option><option>B.ING</option><option>IPAS</option>
      <option>DPK</option><option>INF</option><option>PPKN</option><option>PABP</option>
      <option>KKA</option><option>BJ</option><option>SI</option><option>SB</option>
      <option>PJOK</option><option>BK</option><option>Lainnya</option>
    </select>
    <div class="todo-input-row">
      <input type="text" class="todo-inp" id="todoInp" placeholder="Tulis tugas baru..." onkeydown="if(event.key==='Enter')addTodo()">
      <button class="todo-add" onclick="addTodo()">+ Tambah</button>
    </div>
    <div class="todo-filters">
      <button class="todo-filter active" onclick="filterTodo('all',this)">Semua</button>
      <button class="todo-filter" onclick="filterTodo('pending',this)">Belum</button>
      <button class="todo-filter" onclick="filterTodo('done',this)">Selesai</button>
    </div>
    <div class="todo-list" id="todoList"></div>
  </div>
</div>

<!-- ======= AI ======= -->
<div class="page" id="chatPage">
  <div class="wrap">
    <h1 class="ptitle">Tanya <span>AI</span></h1>
    <div class="psub">Pilih platform AI favoritmu ğŸ¤–</div>
    <div class="ai-context">
      <div class="ai-context-label">âœï¸ Tulis pertanyaanmu</div>
      <div class="ai-context-desc">Ketik pertanyaan di bawah, lalu klik platform pilihanmu. Pertanyaan langsung dikirim otomatis!</div>
      <textarea class="ai-textarea" id="aiQ" placeholder="Contoh: jelaskan rumus luas lingkaran step by step..."></textarea>
    </div>
    <div class="ai-grid">
      <div class="ai-card gpt">
        <div class="ai-head">
          <div class="ai-logo"><svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 24 24" fill="white"><path d="M22.282 9.821a5.985 5.985 0 00-.516-4.91 6.046 6.046 0 00-6.51-2.9A6.065 6.065 0 004.981 4.18a5.985 5.985 0 00-3.998 2.9 6.046 6.046 0 00.743 7.097 5.98 5.98 0 00.51 4.911 6.051 6.051 0 006.515 2.9A5.985 5.985 0 0013.26 24a6.056 6.056 0 005.772-4.206 5.99 5.99 0 003.997-2.9 6.056 6.056 0 00-.747-7.073zM13.26 22.43a4.476 4.476 0 01-2.876-1.04l.141-.081 4.779-2.758a.795.795 0 00.392-.681v-6.737l2.02 1.168a.071.071 0 01.038.052v5.583a4.504 4.504 0 01-4.494 4.494zM3.6 18.304a4.47 4.47 0 01-.535-3.014l.142.085 4.783 2.759a.771.771 0 00.78 0l5.843-3.369v2.332a.08.08 0 01-.033.062L9.74 19.95a4.5 4.5 0 01-6.14-1.646zM2.34 7.896a4.485 4.485 0 012.366-1.973V11.6a.766.766 0 00.388.676l5.815 3.355-2.02 1.168a.076.076 0 01-.071 0L4.01 13.95A4.5 4.5 0 012.34 7.896zm16.597 3.855l-5.843-3.387L15.115 7.2a.076.076 0 01.072 0l4.808 2.776a4.5 4.5 0 01-.692 8.115v-5.678a.79.79 0 00-.366-.662zm2.01-3.023l-.141-.085-4.774-2.782a.776.776 0 00-.785 0L9.409 9.23V6.897a.066.066 0 01.028-.061l4.807-2.774a4.5 4.5 0 016.703 4.66zm-12.64 4.135l-2.02-1.164a.08.08 0 01-.038-.057V6.075a4.5 4.5 0 017.375-3.453l-.142.08L8.704 5.46a.795.795 0 00-.393.681zm1.097-2.365l2.602-1.5 2.607 1.497v2.991l-2.602 1.5-2.607-1.496z"/></svg></div>
          <div><div class="ai-platname">ChatGPT</div><div class="ai-platsub">by OpenAI Â· GPT-4o</div></div>
          <div class="ai-badge">Gratis</div>
        </div>
        <div class="ai-desc">Paling populer. Bisa upload foto soal juga!</div>
        <div class="ai-tags"><span>ğŸ“ Jawab soal</span><span>ğŸ–¼ï¸ Foto soal</span><span>ğŸŒ Multibahasa</span></div>
        <button class="ai-btn gpt-btn" onclick="openAI('chatgpt')">Buka ChatGPT <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg></button>
      </div>
      <div class="ai-card cld">
        <div class="ai-head">
          <div class="ai-logo" style="background:#1a1a1a;padding:0px;"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 48 48"><polygon points="26.25,24.00 21.75,24.00 23.00,9.00 25.00,9.00" fill="#d97757"/><polygon points="25.55,24.82 22.45,23.18 28.50,13.94 29.83,14.64" fill="#d97757"/><polygon points="25.29,25.84 22.71,22.16 34.89,15.15 36.04,16.79" fill="#d97757"/><polygon points="24.21,25.49 23.79,22.51 31.84,22.29 32.01,23.48" fill="#d97757"/><polygon points="23.23,26.11 24.77,21.89 37.50,27.85 36.81,29.73" fill="#d97757"/><polygon points="22.90,25.02 25.10,22.98 29.89,29.44 29.02,30.26" fill="#d97757"/><polygon points="22.07,24.52 25.93,23.48 28.23,36.32 26.50,36.79" fill="#d97757"/><polygon points="22.78,23.74 25.22,24.26 23.03,30.95 22.06,30.74" fill="#d97757"/><polygon points="22.28,22.55 25.72,25.45 15.77,35.37 14.23,34.08" fill="#d97757"/><polygon points="23.41,22.62 24.59,25.38 16.87,27.68 16.40,26.57" fill="#d97757"/><polygon points="24.17,22.01 23.83,25.99 10.97,23.76 11.13,21.97" fill="#d97757"/><polygon points="24.79,22.73 23.21,25.27 16.90,20.27 17.53,19.25" fill="#d97757"/><polygon points="25.73,23.00 22.27,25.00 17.22,14.06 18.78,13.16" fill="#d97757"/></svg></div>
          <div><div class="ai-platname">Claude</div><div class="ai-platsub">by Anthropic Â· Sonnet</div></div>
          <div class="ai-badge">Gratis</div>
        </div>
        <div class="ai-desc">Paling detail buat penjelasan panjang & rangkuman materi.</div>
        <div class="ai-tags"><span>ğŸ“š Rangkum</span><span>âœï¸ Nulis esai</span><span>ğŸ§  Analisis</span></div>
        <button class="ai-btn cld-btn" onclick="openAI('claude')">Buka Claude <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg></button>
      </div>
      <div class="ai-card gem">
        <div class="ai-head">
          <div class="ai-logo" style="background:linear-gradient(135deg,#1a73e8,#9334e6);"><svg width="24" height="24" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 28C14 26.0633 13.6267 24.2433 12.88 22.54C12.1567 20.8367 11.165 19.355 9.905 18.095C8.645 16.835 7.16333 15.8433 5.46 15.12C3.75667 14.3733 1.93667 14 0 14C1.93667 14 3.75667 13.6383 5.46 12.915C7.16333 12.1683 8.645 11.165 9.905 9.905C11.165 8.645 12.1567 7.16333 12.88 5.46C13.6267 3.75667 14 1.93667 14 0C14 1.93667 14.3617 3.75667 15.085 5.46C15.8317 7.16333 16.835 8.645 18.095 9.905C19.355 11.165 20.8367 12.1683 22.54 12.915C24.2433 13.6383 26.0633 14 28 14C26.0633 14 24.2433 14.3733 22.54 15.12C20.8367 15.8433 19.355 16.835 18.095 18.095C16.835 19.355 15.8317 20.8367 15.085 22.54C14.3617 24.2433 14 26.0633 14 28Z" fill="white"/></svg></div>
          <div><div class="ai-platname">Gemini</div><div class="ai-platsub">by Google Â· 2.0 Flash</div></div>
          <div class="ai-badge">Gratis</div>
        </div>
        <div class="ai-desc">Dari Google, bagus untuk info terkini. Pertanyaan otomatis di-copy! ğŸ“‹</div>
        <div class="ai-tags"><span>ğŸ” Info terkini</span><span>ğŸ‡®ğŸ‡© Bahasa Indo</span><span>ğŸ“Š Fakta</span></div>
        <button class="ai-btn gem-btn" onclick="openAI('gemini')">ğŸ“‹ Copy & Buka Gemini</button>
      </div>
    </div>
    <div class="ai-tips">
      <div class="ai-tips-title">ğŸ’¡ Tips biar jawaban AI makin akurat</div>
      <div class="ai-tip">ğŸ“Œ Sebutin mapel dan topik secara spesifik</div>
      <div class="ai-tip">ğŸ“Œ Kalau punya soal, ketik atau foto soalnya langsung</div>
      <div class="ai-tip">ğŸ“Œ Minta AI jelaskan "step by step" untuk soal MTK</div>
      <div class="ai-tip">ğŸ“Œ Tanya "kenapa?" setelah dapat jawaban biar lebih paham</div>
    </div>
  </div>
</div>

<!-- ======= ABSEN ======= -->
<div class="page" id="attendancePage">
  <div class="wrap">
    <h1 class="ptitle">Absen <span>Kelas</span></h1>
    <div class="psub">X SIJA â€” 34 Siswa</div>
    <div class="absen-list" id="absenList"></div>
  </div>
</div>

<!-- ======= KELOMPOK ======= -->
<div class="page" id="randomizerPage">
  <div class="wrap">
    <h1 class="ptitle">Buat <span>Kelompok</span></h1>
    <div class="psub">Acak adil, biar ngga ribut ğŸ²</div>
    <div class="rand-box">
      <div class="ctrl-group">
        <label class="ctrl-label">Jumlah Kelompok / Anggota per Kelompok</label>
        <input type="number" class="ctrl-input" id="groupCount" min="1" max="33" value="5">
      </div>
      <div class="ctrl-group">
        <label class="ctrl-label">Mode Pembagian</label>
        <select class="ctrl-input" id="groupMode">
          <option value="groups">Jumlah Kelompok</option>
          <option value="members">Anggota per Kelompok</option>
        </select>
      </div>
      <button class="btn-main" onclick="randomizeGroups()">ğŸ² Acak Kelompok</button>
      <div class="rand-res" id="randRes"></div>
    </div>
  </div>
</div>

<!-- ======= ORGANISASI ======= -->
<div class="page" id="galleryPage">
  <div class="wrap">
    <h1 class="ptitle">Struktur <span>Organisasi</span></h1>
    <div class="psub">X SIJA â€” Semester Genap 2025/2026</div>
    <div class="org-sec">
      <div class="org-card wk">
        <div class="org-pos">Wali Kelas</div>
        <div class="org-name">Fifin Windari</div>
        <div class="org-desc">Sebagai wali kelas, Fifin Windari selalu hadir memberikan arahan, motivasi, dan dukungan kepada setiap siswa, menjadikan kelas ini menjadi The Best.</div>
      </div>
    </div>
    <div class="org-sec">
      <div class="org-sec-title">âœ¦ Pengurus Inti âœ¦</div>
      <div class="org-grid">
        <div class="org-card pi2"><div class="org-pos">Ketua Kelas</div><div class="org-name">Fais Akbar Rosyaidi</div><div class="org-desc">Sosok bertanggung jawab dan panutan bagi teman-teman sekelasnya.</div></div>
        <div class="org-card pi2"><div class="org-pos">Wakil Ketua</div><div class="org-name">Latifah Dwi Magnal Hayah</div><div class="org-desc">Pendukung setia ketua kelas yang selalu siap membantu dalam berbagai kegiatan.</div></div>
      </div>
    </div>
    <div class="org-sec">
      <div class="org-sec-title">âœ¦ Bendahara âœ¦</div>
      <div class="org-grid">
        <div class="org-card"><div class="org-pos">Bendahara</div><div class="org-name">Reni Amelia Fatmawati</div><div class="org-desc">Mengatur keuangan kelas dengan teliti dan transparan.</div></div>
        <div class="org-card"><div class="org-pos">Bendahara</div><div class="org-name">Nanda Rahma Dewi Quraisyin</div><div class="org-desc">Pendamping bendahara utama yang piawai dalam pengelolaan keuangan.</div></div>
      </div>
    </div>
    <div class="org-sec">
      <div class="org-sec-title">âœ¦ Sekretaris âœ¦</div>
      <div class="org-grid">
        <div class="org-card"><div class="org-pos">Sekretaris</div><div class="org-name">Dwi Fitriani</div><div class="org-desc">Bertanggung jawab mencatat semua keputusan dan kegiatan kelas.</div></div>
        <div class="org-card"><div class="org-pos">Sekretaris</div><div class="org-name">Friescha Aura Rizky</div><div class="org-desc">Mendokumentasikan kegiatan kelas dan menyebarkan informasi tepat waktu.</div></div>
      </div>
    </div>
    <div class="org-sec">
      <div class="org-sec-title">âœ¦ Keamanan & Kebersihan âœ¦</div>
      <div class="org-grid">
        <div class="org-card"><div class="org-pos">Keamanan & Kebersihan</div><div class="org-name">Selfana Nur Afni</div><div class="org-desc">Menjaga keamanan dan kebersihan kelas agar lingkungan belajar tetap nyaman.</div></div>
        <div class="org-card"><div class="org-pos">Keamanan & Kebersihan</div><div class="org-name">Chika Berlian Adinillah</div><div class="org-desc">Mendukung seksi keamanan dan kebersihan dengan penuh dedikasi.</div></div>
      </div>
    </div>
  </div>
</div>

<!-- SCROLL TOP -->
<button class="scroll-top" id="scrollTop" onclick="window.scrollTo({top:0,behavior:'smooth'})">
  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M18 15l-6-6-6 6"/></svg>
</button>
<div id="toast"></div>

<!-- NAV -->
<nav class="nav">
  <!-- PC brand -->
  <div class="nav-brand" style="display:none" id="navBrand">
    <div class="nav-brand-logo"><span class="bx">X</span><span class="bs">sija</span></div>
    <span class="nav-brand-badge">Ramadhan 1446H</span>
  </div>
  <div class="nav-item active" onclick="showPage('homePage',this)" data-page="homePage">
    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
    <span>Beranda</span>
  </div>
  <div class="nav-item" onclick="showPage('calendarPage',this)" data-page="calendarPage">
    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/></svg>
    <span>Jadwal</span>
  </div>
  <div class="nav-item" onclick="showPage('todoPage',this)" data-page="todoPage">
    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
    <span>Tugas</span>
  </div>
  <div class="nav-item" onclick="showPage('chatPage',this)" data-page="chatPage">
    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/></svg>
    <span>AI Chat</span>
  </div>
  <!-- More button (mobile only) -->
  <div class="nav-item nav-more-btn" onclick="toggleMore(this)" id="moreBtn">
    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
    <span>Lainnya</span>
  </div>
  <!-- PC-only nav items (hidden on mobile, shown in sidebar) -->
  <div class="nav-item nav-pc-only" onclick="showPage('attendancePage',this)" data-page="attendancePage">
    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1.4c0-2 4-3.1 6-3.1s6 1.1 6 3.1V19z"/></svg>
    <span>Absen</span>
  </div>
  <div class="nav-item nav-pc-only" onclick="showPage('randomizerPage',this)" data-page="randomizerPage">
    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM7.5 18c-.83 0-1.5-.67-1.5-1.5S6.67 15 7.5 15s1.5.67 1.5 1.5S8.33 18 7.5 18zm0-9C6.67 9 6 8.33 6 7.5S6.67 6 7.5 6 9 6.67 9 7.5 8.33 9 7.5 9zm4.5 4.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4.5 4.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm0-9c-.83 0-1.5-.67-1.5-1.5S15.67 6 16.5 6s1.5.67 1.5 1.5S17.33 9 16.5 9z"/></svg>
    <span>Kelompok</span>
  </div>
  <div class="nav-item nav-pc-only" onclick="showPage('galleryPage',this)" data-page="galleryPage">
    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
    <span>Organisasi</span>
  </div>
</nav>

<!-- MORE MENU SHEET (mobile only) -->
<div class="more-sheet" id="moreSheet">
  <div class="more-sheet-inner">
    <div class="more-sheet-title">Menu Lainnya</div>
    <div class="more-grid">
      <div class="more-item" onclick="showPageFromMore('attendancePage')">
        <div class="more-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1.4c0-2 4-3.1 6-3.1s6 1.1 6 3.1V19z"/></svg></div>
        <div class="more-label">Absen</div>
      </div>
      <div class="more-item" onclick="showPageFromMore('randomizerPage')">
        <div class="more-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM7.5 18c-.83 0-1.5-.67-1.5-1.5S6.67 15 7.5 15s1.5.67 1.5 1.5S8.33 18 7.5 18zm0-9C6.67 9 6 8.33 6 7.5S6.67 6 7.5 6 9 6.67 9 7.5 8.33 9 7.5 9zm4.5 4.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4.5 4.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm0-9c-.83 0-1.5-.67-1.5-1.5S15.67 6 16.5 6s1.5.67 1.5 1.5S17.33 9 16.5 9z"/></svg></div>
        <div class="more-label">Kelompok</div>
      </div>
      <div class="more-item" onclick="showPageFromMore('galleryPage')">
        <div class="more-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg></div>
        <div class="more-label">Organisasi</div>
      </div>
    </div>
  </div>
  <div class="more-backdrop" onclick="closeMore()"></div>
</div>
</div><!-- /shell -->

<script>
// ============================================================
// STARS
// ============================================================
(function(){
  const c=document.getElementById('stars');
  for(let i=0;i<100;i++){
    const s=document.createElement('div');s.className='star';
    const sz=Math.random()*2.2+.4;
    s.style.cssText=`width:${sz}px;height:${sz}px;left:${Math.random()*100}%;top:${Math.random()*75}%;--d:${Math.random()*3+2}s;animation-delay:${Math.random()*5}s;--lo:${Math.random()*.15+.05};--hi:${Math.random()*.6+.3}`;
    c.appendChild(s);
  }
})();

// ============================================================
// PC SIDEBAR BRAND
// ============================================================
function checkPCSidebar(){
  const brand=document.getElementById('navBrand');
  if(brand) brand.style.display=window.innerWidth>=900?'block':'none';
}
checkPCSidebar();
window.addEventListener('resize',checkPCSidebar);

// ============================================================
// DATA
// ============================================================
const quotes=[
  "Puasa bukan hanya menahan lapar, tapi juga menahan ego. ğŸŒ™",
  "Ramadhan mengajarkan kita bahwa kesabaran itu indah. âœ¨",
  "Kesulitan hari ini adalah kekuatan untuk hari esok. ğŸ’ª",
  "Guru bisa mengajarmu segalanya, tapi hanya kamu yang bisa membuatmu mengerti. ğŸ§ ",
  "Hiduplah seakan hari ini adalah hari terakhir kamu hidup - Selfana",
  "Lelah itu pasti tapi menyerah bukan solusi - Hanafi",
  "Berlebihan itu tidak baik, kecuali uang - Galih",
  "HIDUPPPP BLONDEEE - Nanda",
  "Maaf sering buat kesalahan. Maklum baru pertamakali hidup - Ra",
  "Sucikan hati, bersihkan browser history - Hanafi",
  "Jika kau melihat orang ganteng memakai kacamata itulah ketua 10 SIJA - Galih",
  "Sek nglakoni adem ayem, sek nyawang kakean cangkem - Bayu",
  "Ramadhan momen terbaik untuk jadi versi terbaikmu. ğŸŒŸ",
  "Berbuka dengan yang manis, belajar dengan yang serius! ğŸ˜„"
];
const besokGreetings=[
  "ğŸŒ™ Istirahat dulu, besok semangat lagi!",
  "âœ¨ Malam ini waktunya belajar & tadarus, besok siap tempur!",
  "ğŸŒŸ Besok ada sekolah, jangan begadang ya~",
  "ğŸ“š Persiapkan dirimu untuk hari esok yang lebih baik!",
  "ğŸ•Œ Setelah tarawih, istirahat cukup biar besok semangat!"
];
const weekendGreetings=[
  "ğŸŒ™ Selamat menikmati akhir pekan Ramadhan! Jangan lupa tadarus ya~",
  "â˜ªï¸ Weekend Ramadhan = waktu terbaik untuk ibadah dan istirahat!",
  "ğŸ•Œ Perbanyak ibadah di akhir pekan Ramadhan ini. Semangat!",
  "ğŸŒŸ Ramadhan weekend â€” charge semangat untuk pekan depan!",
  "ğŸ‹ Nikmati momen berharga Ramadhan bersama keluarga!"
];
const scheduleData={
  hari:{
    "Senin":{seragam:"OSIS",jadwal:[
      {jam:"07:30-07:45",kegiatan:"Tadarus AQ"},
      {jam:"07:45-08:15",kegiatan:"Upacara"},
      {jam:"08:15-09:15",mapel:"MTK",guru:"Sukma"},
      {jam:"09:15-09:45",mapel:"B.INDO",guru:"Endra"},
      {jam:"09:45-10:00",kegiatan:"Istirahat"},
      {jam:"10:00-10:30",mapel:"B.INDO",guru:"Endra"},
      {jam:"10:30-12:00",mapel:"DPK",guru:"Udin"},
      {jam:"12:00-12:45",kegiatan:"Ishoma"},
      {jam:"12:45-13:45",mapel:"INF",guru:"Nur"},
      {jam:"13:45-14:45",mapel:"SB",guru:"Faris"}
    ],jadwalB:[
      {jam:"07:30-07:45",kegiatan:"Tadarus AQ"},
      {jam:"07:45-08:45",mapel:"MTK",guru:"Sukma"},
      {jam:"08:45-09:45",mapel:"B.INDO",guru:"Endra"},
      {jam:"09:45-10:00",kegiatan:"Istirahat"},
      {jam:"10:00-11:30",mapel:"DPK",guru:"Udin"},
      {jam:"11:30-12:00",mapel:"INF",guru:"Nur"},
      {jam:"12:00-12:45",kegiatan:"Ishoma"},
      {jam:"12:45-13:15",mapel:"INF",guru:"Nur"},
      {jam:"13:15-14:15",mapel:"SB",guru:"Faris"}
    ],piket:["Yahya","Azmi","Novi","Sofia","Nanda","Nunik","Reni"]},
    "Selasa":{seragam:"Identitas",jadwal:[
      {jam:"07:30-07:45",kegiatan:"Tadarus AQ"},
      {jam:"07:45-08:45",mapel:"MTK",guru:"Sukma"},
      {jam:"08:45-09:45",mapel:"IPAS",guru:"Septi"},
      {jam:"09:45-10:00",kegiatan:"Istirahat"},
      {jam:"10:00-11:00",mapel:"KKA",guru:"Yuli"},
      {jam:"11:00-12:00",mapel:"B.ING",guru:"Fifin"},
      {jam:"12:00-12:45",kegiatan:"Ishoma"},
      {jam:"12:45-13:45",mapel:"B.JAWA",guru:"Dhianis"},
      {jam:"13:45-14:45",mapel:"SI",guru:"Sonef"}
    ],piket:["Auladi","Arka","Raa","Fitri","Mutia","Keysa","Zahra"]},
    "Rabu":{seragam:"Batik",jadwal:[
      {jam:"07:30-07:45",kegiatan:"Tadarus AQ"},
      {jam:"07:45-09:15",mapel:"PABP",guru:"Yani"},
      {jam:"09:15-09:45",mapel:"INF",guru:"Nur"},
      {jam:"09:45-10:00",kegiatan:"Istirahat"},
      {jam:"10:00-10:30",mapel:"INF",guru:"Nur"},
      {jam:"10:30-12:00",mapel:"DPK",guru:"Udin"},
      {jam:"12:00-12:45",kegiatan:"Ishoma"},
      {jam:"12:45-13:45",mapel:"IPAS",guru:"Septi"}
    ],piket:["Gibran","Bayu","Selva","Yumna","Chika","Tasya","Olifia"]},
    "Kamis":{seragam:"OSIS",jadwal:[
      {jam:"07:30-07:45",kegiatan:"Tadarus AQ"},
      {jam:"07:45-08:45",mapel:"IPAS",guru:"Septi"},
      {jam:"08:45-09:45",mapel:"PPKN",guru:"Firman"},
      {jam:"09:45-10:00",kegiatan:"Istirahat"},
      {jam:"10:00-11:00",mapel:"B.ING",guru:"Fifin"},
      {jam:"11:00-12:00",mapel:"B.IND",guru:"Endra"},
      {jam:"12:00-12:45",kegiatan:"Ishoma"},
      {jam:"12:45-13:15",mapel:"BK",guru:"Ida"},
      {jam:"13:15-14:45",mapel:"DPK",guru:"Nur"}
    ],piket:["Feriza","Galih","Alya","Aini","Cata","Muza","Cipta"]},
    "Jumat":{seragam:"Pramuka",jadwal:[
      {jam:"07:30-07:45",kegiatan:"Tadarus AQ"},
      {jam:"07:45-09:15",mapel:"PJOK",guru:"Bagas"},
      {jam:"09:15-09:45",mapel:"DPK",guru:"Nur"},
      {jam:"09:45-10:00",kegiatan:"Istirahat"},
      {jam:"10:00-11:00",mapel:"DPK",guru:"Nur"}
    ],piket:["Fais","Latifa","Ayuk","Fitri","Lia","Felisa"]}
  }
};
const students=["Aini Kamila","Alya Fatimatus Zahra","Aprilia Dwi Anggraini","Arkan Praditya","Aulady Syahputra","Ayuk Rizka Nur Azizah","Bayu Dwi Prasetiyo","Chatarina Rosalinda","Chika Berlian Adinillah","Ciptaning Tri Rahayu","Dwi Fitriani","Elyahya Dwi Hanafi","Fais Akbar Rosyaidi","Faridhatuz Zahra","Felisa Nur Aini","Feriza Assyaddad","Fitri Nur Hayati","Friescha Aura Rizky","Gibran Muhamad Riadi","Keisya Putri Az-Zahra","Latifah Dwi Magnal Hayah","Lisa Mutia Asih","Muhammad Galih Adi P.","Muhammad Tsabitul Azmi","Muzaemah","Nanda Rahma Dewi Quraisyin","Natasya Khoirunnisa","Novita Sari","Nunik Riskiyana","Olifia Ramadhani","Reni Amelia Fatmawati","Selfana Nur Afni","Sofia khusna","Zhafira Yumna Artanti"];
const dayNames=['Minggu','Senin','Selasa','Rabu','Kamis','Jumat','Sabtu'];
const monthNames=['Januari','Februari','Maret','April','Mei','Juni','Juli','Agustus','September','Oktober','November','Desember'];

// ============================================================
// PRAYER TIMES
// ============================================================
let PT={sahur:{h:4,m:2},subuh:{h:4,m:12},dzuhur:{h:11,m:51},ashar:{h:15,m:8},maghrib:{h:17,m:52},isya:{h:19,m:2}};
const PT_KEYS=['sahur','subuh','dzuhur','ashar','maghrib','isya'];
function toMin(t){return t.h*60+t.m;}
function toSec(t){return t.h*3600+t.m*60;}
function parsePT(s){const[h,m]=s.split(':').map(Number);return{h,m};}

async function fetchPT(){
  try{
    const now=new Date();
    const url=`https://api.aladhan.com/v1/timings/${now.getDate()}-${now.getMonth()+1}-${now.getFullYear()}?latitude=-7.3594&longitude=109.9077&method=20`;
    const r=await fetch(url);const d=await r.json();
    if(d.code===200){
      const t=d.data.timings;
      PT={sahur:parsePT(t.Imsak),subuh:parsePT(t.Fajr),dzuhur:parsePT(t.Dhuhr),ashar:parsePT(t.Asr),maghrib:parsePT(t.Maghrib),isya:parsePT(t.Isha)};
      updatePrayerStrip();updateCountdown();
    }
  }catch(e){}
}

function updatePrayerStrip(){
  const isFriday=new Date().getDay()===5;
  PT_KEYS.forEach(k=>{
    const p=PT[k];
    const tEl=document.getElementById('pt-'+k);
    const nEl=document.getElementById('pn-'+k);
    if(tEl)tEl.textContent=`${String(p.h).padStart(2,'0')}:${String(p.m).padStart(2,'0')}`;
    if(nEl){
      if(k==='dzuhur')nEl.textContent=isFriday?'ğŸ•Œ Jumat':'Dzuhur';
      else if(k==='isya')nEl.textContent='ğŸ•Œ Isya & Tarawih';
    }
  });
}

function updateCountdown(){
  const now=new Date();
  const sec=now.getHours()*3600+now.getMinutes()*60+now.getSeconds();
  const isFriday=now.getDay()===5;
  const sah=toSec(PT.sahur),sub=toSec(PT.subuh),dzu=toSec(PT.dzuhur),ash=toSec(PT.ashar),mag=toSec(PT.maghrib),isy=toSec(PT.isya);
  let label,arabic,rem,sub2;
  if(sec<sah){
    rem=sah-sec;label='ğŸŒ™ Menuju Sahur';arabic='Ù…ÙØ±Ù’Ø­ÙØ¨Ø§Ù‹ Ø¨ÙØ±ÙÙ…ÙØ¶ÙØ§Ù†';sub2='Siap-siap sahur ya! ğŸš';
  } else if(sec<sub){
    rem=sub-sec;label='â° Imsak & Subuh';arabic='ÙˆÙÙ‚Ù’ØªÙ Ø§Ù„Ø³ÙÙ‘Ø­ÙÙˆØ±';sub2='Segera selesaikan sahur! ğŸš';
  } else if(sec<dzu){
    rem=dzu-sec;
    label=isFriday?'ğŸ•Œ Menuju Sholat Jumat':'ğŸŒ¤ï¸ Menuju Dzuhur';
    arabic=isFriday?'ØµÙÙ„ÙØ§Ø©Ù Ø§Ù„Ø¬ÙÙ…ÙØ¹ÙØ©':'ØµÙÙ„ÙØ§Ø©Ù Ø§Ù„Ø¸ÙÙ‘Ù‡Ù’Ø±';
    sub2=isFriday?'Jangan sampai telat Jumat-an ya! ğŸ•Œ':'Semangat puasanya! â˜€ï¸';
  } else if(sec<ash){
    rem=ash-sec;
    label=isFriday?'ğŸ•Œ Waktu Sholat Jumat':'âœ… Waktu Dzuhur';
    arabic=isFriday?'ØµÙÙ„ÙØ§Ø©Ù Ø§Ù„Ø¬ÙÙ…ÙØ¹ÙØ©':'Ø§Ù„Ø¸ÙÙ‘Ù‡Ù’Ø±Ù Ø­ÙØ§Ù†Ù';
    sub2=isFriday?'Yuk segera ke masjid! ğŸ•Œ':'Waktunya sholat Dzuhur! ğŸ™';
  } else if(sec<mag){
    rem=mag-sec;label='ğŸŒ… Menuju Buka Puasa';arabic='ØµÙØ¨Ù’Ø±ÙŒ Ø¬ÙÙ…ÙÙŠÙ„';sub2='Sabar ya, sebentar lagi berbuka! ğŸ¥¤';
  } else if(sec<isy){
    rem=isy-sec;label='âœ¨ Waktu Berbuka âœ¨';arabic='Ø£ÙÙÙ’Ø·ÙØ±Ù’ Ø¨ÙØ³ÙØ±ÙÙˆØ±';sub2='Alhamdulillah, selamat berbuka puasa! ğŸŒ™ğŸ½ï¸';
  } else {
    rem=(86400-sec)+sah;label='ğŸ•Œ Isya & Tarawih';arabic='ØµÙÙ„ÙØ§Ø©Ù Ø§Ù„ØªÙÙ‘Ø±ÙØ§ÙˆÙÙŠØ­';sub2='Yuk sholat Isya & Tarawih! âœ¨';
  }
  const h=Math.floor(rem/3600),m=Math.floor((rem%3600)/60),s=rem%60;
  // Detect alert mode (â‰¤5 menit sebelum waktu sholat berikutnya)
  const isBuka=(sec>=mag&&sec<isy);
  const isAlert=!isBuka&&rem<=300&&rem>0;
  const hero=document.getElementById('heroBox');
  hero.classList.toggle('hero-alert',isAlert);
  hero.classList.toggle('hero-buka',isBuka);
  // Label prefix saat alert
  const alertPrefix=isAlert?'ğŸ”” ':''
  document.getElementById('rcLabel').textContent=alertPrefix+label;
  document.getElementById('rcTitle').textContent=arabic;
  document.getElementById('rcTime').textContent=`${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
  document.getElementById('rcSub').textContent=sub2;
  // Next prayer hint saat alert
  const nextEl=document.getElementById('rcNext');
  if(isAlert){nextEl.textContent='ğŸŒ™ Segera bersiap, waktunya tiba!';}
  else if(isBuka){nextEl.textContent='Setelah buka â†’ Isya & Tarawih ğŸ•Œ';}
  else{nextEl.textContent='';}
  // active prayer highlight
  const cur=now.getHours()*60+now.getMinutes();
  document.querySelectorAll('.pi').forEach((el,i)=>{
    el.classList.remove('active');
    const key=PT_KEYS[i];
    const p=PT[key];
    const nxtKey=PT_KEYS[i+1];
    const nxt=nxtKey?PT[nxtKey]:null;
    if(cur>=toMin(p)&&(!nxt||cur<toMin(nxt)))el.classList.add('active');
  });
  updatePrayerStrip();
}

// ============================================================
// CLOCK & DATE
// ============================================================
function updateClock(){
  const now=new Date();
  document.getElementById('clockEl').textContent=`${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}`;
  document.getElementById('dateEl').textContent=`${dayNames[now.getDay()]}, ${now.getDate()} ${monthNames[now.getMonth()]} ${now.getFullYear()}`;
}

// ============================================================
// HOME PAGE
// ============================================================
function getNextItem(jadwal,curIdx){
  for(let i=curIdx+1;i<jadwal.length;i++){if(jadwal[i].jam)return jadwal[i];}
  return null;
}
function getNextLabel(item){
  if(!item)return null;
  if(item.mapel)return item.mapel;
  if(item.kegiatan){
    if(item.kegiatan.includes('Istirahat'))return 'â˜• Istirahat';
    if(item.kegiatan.includes('Ishoma'))return 'ğŸ•Œ Ishoma';
    return item.kegiatan;
  }
  return null;
}

let _cachedBesokMsg='';let _cachedBesokDay='';
let _cachedQuote='';let _cachedQuoteKey='';
let _cachedWeekendMsg='';let _cachedWeekendDay='';

function getActiveJadwal(dayName){
  const data=scheduleData.hari[dayName];
  if(!data) return null;
  if(dayName==='Senin'&&data.jadwalB){
    return senin_mode==='no_upacara'?data.jadwalB:data.jadwal;
  }
  return data.jadwal;
}

function getBesokDay(dn){
  const idx=dayNames.indexOf(dn);
  // Skip weekend: if today fri â†’ besok sabtu (libur) â†’ show senin
  // Actually just get next school day
  let next=(idx+1)%7;
  while(dayNames[next]==='Sabtu'||dayNames[next]==='Minggu') next=(next+1)%7;
  return dayNames[next];
}

function updateHome(){
  const now=new Date(),dn=dayNames[now.getDay()];
  const cur=now.getHours()*60+now.getMinutes();
  const curSec=now.getHours()*3600+now.getMinutes()*60+now.getSeconds();
  const pill=document.getElementById('statusPill');
  const desc=document.getElementById('cdesc');
  const title=document.getElementById('homeTitle');

  // Helper: reset labels to hari ini
  function setLabelsHariIni(){
    document.getElementById('lSeragam').textContent='Seragam';
    document.getElementById('lMapel').textContent='Mapel';
    document.getElementById('lPiket').textContent='Piket';
    document.getElementById('lPulang').textContent='Pulang';
    if(title) title.innerHTML='Ada Apa <span>Hari Ini?</span>';
  }
  // Helper: set labels to besok mode
  function setLabelsBesok(besokDn){
    document.getElementById('lSeragam').textContent='Seragam Besok';
    document.getElementById('lMapel').textContent='Mapel Besok';
    document.getElementById('lPiket').textContent='Piket Besok';
    document.getElementById('lPulang').textContent='Pulang Besok';
    if(title) title.innerHTML=`Persiapan <span>${besokDn}</span>`;
  }

  // WEEKEND
  if(dn==='Sabtu'||dn==='Minggu'){
    pill.textContent='ğŸŒ™ Libur';pill.className='status-pill pill-off';
    desc.classList.remove('cdesc-alert');desc.innerHTML='';
    setLabelsHariIni();
    if(title) title.innerHTML='Selamat <span>Libur!</span>';
    if(_cachedWeekendDay!==dn){_cachedWeekendDay=dn;_cachedWeekendMsg=weekendGreetings[Math.floor(Math.random()*weekendGreetings.length)];}
    desc.textContent=_cachedWeekendMsg;
    ['iSeragam','iMapel','iPiket','iPulang'].forEach(id=>document.getElementById(id).textContent='-');
    return;
  }

  // After 19:00 â†’ switch to BESOK mode
  const isBesokMode = cur >= 15*60 && cur < 24*60;
  const activeDay = isBesokMode ? getBesokDay(dn) : dn;
  const day = scheduleData.hari[activeDay];
  if(!day) return;

  if(isBesokMode){
    setLabelsBesok(activeDay);
    pill.textContent=`ğŸ“… Besok: ${activeDay}`;pill.className='status-pill pill-school';
    if(_cachedBesokDay!==activeDay){_cachedBesokDay=activeDay;_cachedBesokMsg=besokGreetings[Math.floor(Math.random()*besokGreetings.length)];}
    desc.classList.remove('cdesc-alert');desc.innerHTML='';
    desc.textContent=_cachedBesokMsg;
    const jadwalBesok=getActiveJadwal(activeDay);
    const subjects=[...new Set(jadwalBesok.filter(i=>i.mapel).map(i=>i.mapel))];
    document.getElementById('iSeragam').textContent=day.seragam;
    document.getElementById('iMapel').textContent=subjects.join(', ')||'-';
    document.getElementById('iPiket').textContent=day.piket.join(', ');
    let endBesok=activeDay==='Jumat'?11*60:activeDay==='Rabu'?13*60+45:14*60+45;
    if(activeDay==='Senin'&&senin_mode==='no_upacara') endBesok=14*60+15;
    const endHour=Math.floor(endBesok/60),endMin=endBesok%60;
    document.getElementById('iPulang').textContent=`ğŸ  ${String(endHour).padStart(2,'0')}:${String(endMin).padStart(2,'0')}`;
    return;
  }

  // HARI INI mode
  setLabelsHariIni();
  pill.textContent='ğŸ“š Sekolah';pill.className='status-pill pill-school';
  document.getElementById('iSeragam').textContent=day.seragam;
  document.getElementById('iPiket').textContent=day.piket.join(', ');
  const endT=dn==='Jumat'?11*60:dn==='Rabu'?13*60+45:14*60+45;
  const rem=endT-cur;
  document.getElementById('iPulang').textContent=cur<endT?(rem>=60?`â° ${Math.floor(rem/60)} jam ${rem%60} mnt lagi`:`â° ${rem} menit lagi`):(dn==='Rabu'?'ğŸ¨ Waktu ekskul':'ğŸ‰ Sudah pulang');
  const activeJadwal=getActiveJadwal(dn);
  const subjects=[...new Set(activeJadwal.filter(i=>i.mapel).map(i=>i.mapel))];
  document.getElementById('iMapel').textContent=subjects.join(', ')||'-';
  let found=false;
  for(let idx=0;idx<activeJadwal.length;idx++){
    const item=activeJadwal[idx];
    if(!item.jam)continue;
    const[st,en]=item.jam.split('-');
    const[sh,sm]=st.split(':').map(Number),[eh,em]=en.split(':').map(Number);
    const s2=sh*60+sm,e2=eh*60+em;
    const e2Sec=eh*3600+em*60;
    if(cur>=s2&&cur<e2){
      found=true;
      const remSec=e2Sec-curSec;
      const rh=Math.floor(remSec/3600),rm=Math.floor((remSec%3600)/60),rs=remSec%60;
      const rt=rh>0?`${rh}j ${rm}m ${rs}d`:(rm>0?`${rm}m ${rs}d`:`${rs}d`);
      const next=getNextItem(activeJadwal,idx);
      const nextLabel=getNextLabel(next);
      if(remSec<=300&&remSec>0){
        desc.classList.add('cdesc-alert');
        const minOnly=Math.floor(remSec/60),secOnly=remSec%60;
        const countStr=`${String(minOnly).padStart(2,'0')}:${String(secOnly).padStart(2,'0')}`;
        const curLabel=item.mapel?`ğŸ“š ${item.mapel}`:(item.kegiatan?.includes('Istirahat')?'â˜• Istirahat':item.kegiatan?.includes('Ishoma')?'ğŸ•Œ Ishoma':`ğŸ“‹ ${item.kegiatan}`);
        desc.innerHTML=`<div class="alert-top">ğŸ”” ${curLabel} hampir selesai!</div><div class="alert-count">${countStr}</div>${nextLabel?`<div class="alert-next">ğŸŒ™ Selanjutnya: <strong>${nextLabel}</strong></div>`:''}`;
      } else {
        desc.classList.remove('cdesc-alert');desc.innerHTML='';
        if(item.kegiatan){
          const qKey=item.jam||item.kegiatan;
          if(_cachedQuoteKey!==qKey){_cachedQuoteKey=qKey;_cachedQuote=quotes[Math.floor(Math.random()*quotes.length)];}
          if(item.kegiatan.includes('Istirahat')){desc.textContent=`â˜• Istirahat (${rt})\n\nğŸ’¡ ${_cachedQuote}`;}
          else if(item.kegiatan.includes('Ishoma')){desc.textContent=`ğŸ•Œ Ishoma (${rt})\n\nğŸ’¡ ${_cachedQuote}`;}
          else desc.textContent=`ğŸ“‹ ${item.kegiatan}`;
        }else if(item.mapel){desc.textContent=`ğŸ“š ${item.mapel} â€” sisa ${rt}`;}
      }
      break;
    }
  }
  if(!found){
    desc.classList.remove('cdesc-alert');desc.innerHTML='';
    if(cur<7*60)desc.textContent='ğŸŒ… Sekolah belum dimulai. Semangat puasanya! ğŸŒ™';
    else if(cur>=endT)desc.textContent='ğŸ‰ Alhamdulillah, sudah pulang! Jangan lupa buka puasa ya~ ğŸŒ™';
    else desc.textContent='â³ Menunggu jadwal berikutnya...';
  }
}

// ============================================================
// CALENDAR
// ============================================================
function renderJadwalItems(jadwal){
  let html='';
  jadwal.forEach(item=>{
    if(item.mapel){html+=`<div class="les"><div class="les-t">${item.jam||''}</div><div class="les-n">${item.mapel}</div><div class="les-g">Guru: ${item.guru}</div></div>`;}
    else if(item.kegiatan){html+=`<div class="les"><div class="les-t">${item.jam||''}</div><div class="les-n">${item.kegiatan.includes('Ishoma')?'\u{1F54C} ':item.kegiatan.includes('Istirahat')?'\u{2615} ':''}${item.kegiatan}</div></div>`;}
  });
  return html;
}
let senin_mode='upacara';
function toggleSeninMode(){
  senin_mode=senin_mode==='upacara'?'no_upacara':'upacara';
  const data=scheduleData.hari['Senin'];
  const jadwal=senin_mode==='upacara'?data.jadwal:data.jadwalB;
  const btn=document.getElementById('senin-toggle-btn');
  if(btn){btn.textContent=senin_mode==='upacara'?'\u{1F3F3}\uFE0F Ada Upacara':'\u{1F4CB} Tanpa Upacara';}
  const body=document.getElementById('senin-jadwal-body');
  if(body){body.innerHTML=renderJadwalItems(jadwal);}
}
function initCalendar(){
  const grid=document.getElementById('schedGrid');grid.innerHTML='';
  Object.entries(scheduleData.hari).forEach(([day,data])=>{
    const card=document.createElement('div');card.className='day-card';card.id='day-'+day;
    let html=`<div class="day-head"><div class="day-name">${day}</div><div class="unif-badge">${data.seragam}</div></div>`;
    if(day==='Senin'&&data.jadwalB){
      html+=`<div style="margin-bottom:10px;"><button id="senin-toggle-btn" onclick="toggleSeninMode()" style="background:linear-gradient(135deg,var(--teal),var(--teal-l));border:none;border-radius:20px;color:#fff;font-size:10px;font-weight:700;padding:5px 14px;cursor:pointer;width:100%;">\u{1F3F3}\uFE0F Ada Upacara</button></div>`;
      html+=`<div id="senin-jadwal-body">${renderJadwalItems(data.jadwal)}</div>`;
    } else {
      data.jadwal.forEach(item=>{
        if(item.mapel){html+=`<div class="les"><div class="les-t">${item.jam||''}</div><div class="les-n">${item.mapel}</div><div class="les-g">Guru: ${item.guru}</div></div>`;}
        else if(item.kegiatan){html+=`<div class="les"><div class="les-t">${item.jam||''}</div><div class="les-n">${item.kegiatan.includes('Ishoma')?'\u{1F54C} ':item.kegiatan.includes('Istirahat')?'\u{2615} ':''}${item.kegiatan}</div></div>`;}
      });
    }
    card.innerHTML=html;grid.appendChild(card);
  });
}
function scrollToDay(day,btn){
  const card=document.getElementById('day-'+day);if(!card)return;
  document.querySelectorAll('.daybtn').forEach(b=>b.classList.remove('active'));
  if(btn)btn.classList.add('active');
  window.scrollTo({top:card.getBoundingClientRect().top+window.pageYOffset-110,behavior:'smooth'});
  card.style.animation='none';setTimeout(()=>card.style.animation='hl .8s ease',100);
}

// ============================================================
// ATTENDANCE
// ============================================================
function initAbsen(){
  const list=document.getElementById('absenList');list.innerHTML='';
  students.forEach((s,i)=>{
    const d=document.createElement('div');d.className='absen-item';
    d.innerHTML=`<div class="absen-no">${i+1}.</div><div class="absen-name">${s}</div>`;
    list.appendChild(d);
  });
}

// ============================================================
// RANDOMIZER
// ============================================================
function randomizeGroups(){
  const count=parseInt(document.getElementById('groupCount').value);
  const mode=document.getElementById('groupMode').value;
  if(!count||count<1){alert('Masukkan jumlah yang valid!');return;}
  const sh=[...students].sort(()=>Math.random()-.5);
  let groups=[];
  if(mode==='groups'){const pg=Math.ceil(sh.length/count);for(let i=0;i<count;i++)groups.push(sh.slice(i*pg,(i+1)*pg));}
  else{const ng=Math.ceil(sh.length/count);for(let i=0;i<ng;i++)groups.push(sh.slice(i*count,(i+1)*count));}
  document.getElementById('randRes').innerHTML=groups.filter(g=>g.length).map((g,i)=>`<div class="group-card"><div class="group-title">ğŸŒ™ Kelompok ${i+1} (${g.length} orang)</div><div class="group-mems">${g.join(', ')}</div></div>`).join('');
}

// ============================================================
// NAVIGATION
// ============================================================
const pageTitles={homePage:'Beranda',calendarPage:'Jadwal Lengkap',todoPage:'To-Do Tugas',chatPage:'Tanya AI',attendancePage:'Absensi',randomizerPage:'Buat Kelompok',galleryPage:'Struktur Organisasi'};
function showPage(id,navEl){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  if(navEl)navEl.classList.add('active');
  window.scrollTo({top:0,behavior:'smooth'});
  const pt=document.getElementById('hPageTitle');
  if(pt)pt.textContent=pageTitles[id]||'';
  // close more sheet if open
  const sheet=document.getElementById('moreSheet');
  if(sheet)sheet.classList.remove('open');
}

// Scroll top
window.addEventListener('scroll',()=>{
  document.getElementById('scrollTop').classList.toggle('show',window.pageYOffset>300);
});

// ============================================================
// AI LAUNCHER
// ============================================================
async function openAI(platform){
  const q=(document.getElementById('aiQ')||{}).value?.trim()||'';
  if(platform==='gemini'){
    if(q){
      let copied=false;
      try{if(navigator.clipboard&&window.isSecureContext){await navigator.clipboard.writeText(q);copied=true;}}catch(e){}
      if(!copied){try{const ta=document.createElement('textarea');ta.value=q;ta.setAttribute('readonly','');ta.style.cssText='position:fixed;top:0;left:0;width:1px;height:1px;opacity:0;';document.body.appendChild(ta);ta.focus();ta.select();ta.setSelectionRange(0,99999);copied=document.execCommand('copy');document.body.removeChild(ta);}catch(e){}}
      showToast(copied?'âœ… Pertanyaan di-copy! Paste di Gemini ya ğŸ“‹':'âš ï¸ Buka Gemini lalu paste manual!');
    }
    setTimeout(()=>{const a=document.createElement('a');a.href='https://gemini.google.com/';a.target='_blank';a.rel='noopener noreferrer';document.body.appendChild(a);a.click();document.body.removeChild(a);},400);
    return;
  }
  const bases={chatgpt:'https://chatgpt.com/',claude:'https://claude.ai/new'};
  const withQ={chatgpt:`https://chatgpt.com/?q=${encodeURIComponent(q)}`,claude:`https://claude.ai/new?q=${encodeURIComponent(q)}`};
  window.open(q?withQ[platform]:bases[platform],'_blank');
}
function showToast(msg){
  const t=document.getElementById('toast');t.textContent=msg;t.style.opacity='1';
  clearTimeout(t._tmr);t._tmr=setTimeout(()=>t.style.opacity='0',2800);
}

// ============================================================
// TODO
// ============================================================
let todos=[];
try{todos=JSON.parse(localStorage.getItem('xsija_todos')||'[]');}catch(e){todos=[];}
let todoFilter='all';
function saveTodos(){try{localStorage.setItem('xsija_todos',JSON.stringify(todos));}catch(e){}}
function addTodo(){
  const inp=document.getElementById('todoInp'),sel=document.getElementById('todoMapel');
  const txt=inp.value.trim();if(!txt){inp.focus();return;}
  todos.unshift({id:Date.now(),text:txt,mapel:sel.value,done:false,date:new Date().toLocaleDateString('id-ID',{day:'numeric',month:'short'})});
  saveTodos();inp.value='';sel.value='';renderTodos();
}
function toggleTodo(id){const t=todos.find(t=>t.id===id);if(t){t.done=!t.done;saveTodos();renderTodos();}}
function deleteTodo(id){todos=todos.filter(t=>t.id!==id);saveTodos();renderTodos();}
function filterTodo(f,btn){
  todoFilter=f;
  document.querySelectorAll('.todo-filter').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');renderTodos();
}
function renderTodos(){
  const list=document.getElementById('todoList');if(!list)return;
  const total=todos.length,done=todos.filter(t=>t.done).length;
  document.getElementById('stTotal').textContent=total;
  document.getElementById('stDone').textContent=done;
  document.getElementById('stPend').textContent=total-done;
  let filtered=todos;
  if(todoFilter==='done')filtered=todos.filter(t=>t.done);
  if(todoFilter==='pending')filtered=todos.filter(t=>!t.done);
  if(!filtered.length){
    const msg=todoFilter==='done'?'Belum ada tugas selesai':todoFilter==='pending'?'Semua tugas sudah selesai! ğŸ‰':'Belum ada tugas. Tambah sekarang!';
    list.innerHTML=`<div class="todo-empty"><span class="eico">${todoFilter==='done'?'ğŸ‰':'âœ…'}</span><p>${msg}</p></div>`;return;
  }
  list.innerHTML=filtered.map(t=>`<div class="todo-item ${t.done?'done':''}">
    <div class="todo-chk" onclick="toggleTodo(${t.id})">${t.done?'<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>':''}</div>
    <div class="todo-text">${t.text}</div>
    <div class="todo-meta">${t.mapel?`<span class="todo-mapel">${t.mapel}</span>`:''}<span class="todo-date">${t.date}</span></div>
    <button class="todo-del" onclick="deleteTodo(${t.id})">Ã—</button>
  </div>`).join('');
}

// More menu
function toggleMore(btn) {
  const sheet = document.getElementById('moreSheet');
  const isOpen = sheet.classList.contains('open');
  if (isOpen) { closeMore(); }
  else { sheet.classList.add('open'); btn.classList.add('active'); }
}
function closeMore() {
  document.getElementById('moreSheet').classList.remove('open');
  document.getElementById('moreBtn').classList.remove('active');
}
function showPageFromMore(id) {
  closeMore();
  // find matching PC nav item and activate it
  const pcNav = document.querySelector(`.nav-pc-only[data-page="${id}"]`);
  showPage(id, pcNav);
  // deactivate all mobile nav items
  document.querySelectorAll('.nav-item:not(.nav-pc-only)').forEach(n => n.classList.remove('active'));
  // highlight More button dimly to indicate sub-page
  document.getElementById('moreBtn').classList.add('active');
}


function init(){
  updateClock();updateHome();updateCountdown();
  initCalendar();initAbsen();renderTodos();
  fetchPT();
  setInterval(fetchPT,6*60*60*1000);
  setInterval(()=>{updateClock();updateCountdown();},1000);
  setInterval(updateHome,1000);
}
document.addEventListener('DOMContentLoaded',init);
</script>
</body>
</html>
